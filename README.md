# Cybersecurity Lab Project: Cloud-Based Home SOC with Azure Sentinel and Honeypot

## Project Goal
This project demonstrates the setup and operation of a foundational Security Operations Center (SOC) environment in **Microsoft Azure**. By deploying a **honeypot** (a deliberately vulnerable system) and integrating its logs with **Azure Sentinel**, this lab provides hands-on experience in cloud infrastructure security, real-time threat detection, log analysis, and Security Information and Event Management (SIEM) operations.

## Technologies Used
* **Microsoft Azure:** Cloud platform for virtual machines, logging, and SIEM.
* **Azure Virtual Machines (VMs):** Used as the honeypot to attract malicious traffic.
* **Azure Log Analytics Workspace:** Centralized log repository for collecting security events.
* **Microsoft Sentinel:** Cloud-native SIEM for threat detection, investigation, and response.
* **Kusto Query Language (KQL):** Used for querying and analyzing logs within Azure Sentinel.
* **PowerShell Scripting:** For automating log extraction and initial processing (e.g., enriching logs with geolocation data).
* **Third-Party Geolocation API:** (e.g., ipgeolocation.io) For mapping IP addresses to geographical locations.

---

## Lab Components & Architecture
[Include a simple architecture diagram here, showing the VM (honeypot) forwarding logs to Log Analytics, which then feeds into Sentinel for analysis and visualization. You can use tools like Lucidchart, Draw.io, or even ASCII art for this.]

1.  **Honeypot VM:** A Windows VM configured to be exposed to the internet (e.g., via RDP) to attract brute-force attacks and other malicious activities.
2.  **Log Analytics Workspace:** Acts as the central data sink for all logs generated by the honeypot VM.
3.  **Microsoft Sentinel:** Connected to the Log Analytics Workspace, this is where security incidents are detected, analyzed, and visualized.
4.  **Custom Log/Data Ingestion:** A PowerShell script running on the honeypot VM extracts specific security events (e.g., failed RDP login attempts), enriches them with geolocation data via an API, and sends them to the Log Analytics Workspace as a custom log.
5.  **Attack Map (Workbook):** An Azure Sentinel Workbook leveraging KQL queries to visualize the geographic origins of attacks on a world map.

---

## Project Steps & Implementation (Lab Walkthrough)

### 1. Azure Subscription Setup
* Detailed instructions on creating a free Azure subscription.
* Screenshot of successful subscription creation.

### 2. Deploying the Honeypot VM
* **VM Creation:** Step-by-step guide on deploying a Windows VM in Azure.
    * Choosing OS, size, region.
    * Setting up user credentials.
* **Network Configuration:** Configuring **Network Security Group (NSG)** rules to intentionally expose ports (e.g., RDP port 3389) to the internet. **(Emphasize this is for lab purposes only and not for production environments)**
* **In-VM Configuration:** Disabling Windows Firewall inside the VM to ensure logs are generated and traffic is not blocked.

### 3. Setting Up Log Analytics Workspace
* Creating a new Log Analytics Workspace to store VM logs.
* Connecting the Honeypot VM to the Log Analytics Workspace.

### 4. Integrating with Microsoft Sentinel
* Onboarding Microsoft Sentinel to the Log Analytics Workspace.
* Enabling Microsoft Defender for Cloud for server protection and log collection.

### 5. Custom Log Ingestion and Geolocation Enrichment
* **PowerShell Script Deployment:** Instructions for deploying and running the provided PowerShell script on the honeypot VM.
    * Explain how the script extracts failed RDP login attempts.
    * Detail the integration with a geolocation API to add latitude/longitude, country, etc., to log entries.
* **Creating a Custom Log in Log Analytics:** Guide on defining a custom log table in Log Analytics to ingest the enriched data from the PowerShell script.

### 6. Analyzing Logs with Kusto Query Language (KQL)
* **Basic KQL Queries:** Showcase examples of KQL queries to:
    * Retrieve all failed RDP attempts.
    * Filter by source IP address, username, or timestamp.
    * Summarize attacks by country or source IP.
* **Querying Enriched Data:** Demonstrate how to query the custom log data, leveraging the added geolocation information.

### 7. Visualizing Attacks with Azure Sentinel Workbooks
* Creating a new Azure Sentinel Workbook.
* Configuring a world map visualization based on the enriched geolocation data from failed RDP attempts.
* Showcase real-time attack data on the map.

---

## Key Learning Outcomes & Skills Demonstrated
* **Cloud Security Fundamentals:** Understanding of cloud resource deployment (VMs, NSGs), and security best practices (or intentional misconfigurations for lab purposes).
* **Security Operations (SecOps):** Experience with a SIEM platform (Azure Sentinel) for monitoring, detection, and analysis.
* **Log Management & Analysis:** Proficiency in collecting, storing, and analyzing security logs using Azure Log Analytics and KQL.
* **Threat Intelligence:** Utilizing geolocation data to understand attack origins.
* **Scripting:** Basic automation with PowerShell for data processing and ingestion.
* **Data Visualization:** Creating meaningful dashboards for security insights.
* **Incident Response (Basic):** Identifying and understanding common attack patterns (e.g., RDP brute-force).

---

