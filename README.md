# Cybersecurity Lab Project: Cloud-Based Home SOC with Azure Sentinel and Honeypot
## Project Goal
This project demonstrates the setup and operation of a foundational Security Operations Center (SOC) environment in **Microsoft Azure**. By deploying a **honeypot** (a deliberately vulnerable system) and integrating its logs with **Azure Sentinel**, this lab provides hands-on experience in cloud infrastructure security, real-time threat detection, log analysis, and Security Information and Event Management (SIEM) operations.

## Technologies Used
* **Microsoft Azure:** Cloud platform for virtual machines, logging, and SIEM.
* **Azure Virtual Machines (VMs):** Used as the honeypot to attract malicious traffic.
* **Azure Log Analytics Workspace:** Centralized log repository for collecting security events.
* **Microsoft Sentinel:** Cloud-native SIEM for threat detection, investigation, and response.
* **Kusto Query Language (KQL):** Used for querying and analyzing logs within Azure Sentinel.
* **PowerShell Scripting:** For automating log extraction and initial processing (e.g., enriching logs with geolocation data).
* **Third-Party Geolocation API:** (e.g., ipgeolocation.io) For mapping IP addresses to geographical locations.

---

## Lab Components & Architecture
![image](https://github.com/user-attachments/assets/945c563c-9a9e-4f23-8b00-5a9732d1ebbf)


1.  **Honeypot VM:** A Windows VM configured to be exposed to the internet (e.g., via RDP) to attract brute-force attacks and other malicious activities.
2.  **Log Analytics Workspace:** Acts as the central data sink for all logs generated by the honeypot VM.
3.  **Microsoft Sentinel:** Connected to the Log Analytics Workspace, this is where security incidents are detected, analyzed, and visualized.
4.  **Custom Log/Data Ingestion:** A PowerShell script running on the honeypot VM extracts specific security events (e.g., failed RDP login attempts), enriches them with geolocation data via an API, and sends them to the Log Analytics Workspace as a custom log.
5.  **Attack Map (Workbook):** An Azure Sentinel Workbook leveraging KQL queries to visualize the geographic origins of attacks on a world map.

---

## Project Steps & Implementation (Lab Walkthrough)

### 1. Azure Subscription Setup
* Sign up for a free Azure account at portal.azure.com
* Azure gives you $200 free credits for 30 days 
* Screenshot of successful subscription creation.

### 2. Deploying the Honeypot VM
* **VM Creation:** I deployed a Windows 10 Virtual Machine
* ![Screenshot 2025-06-24 185704](https://github.com/user-attachments/assets/cfb3b534-c963-4666-92fb-7a4687f171c1)

    * The VM is internet-facing with an open Network Security Group (NSG)
    * This setup helps attract real brute-force RDP attacks within hours of creation
* **Network Configuration:**  Enable RDP (Port 3389) in NSG (Network Security Group) rules. Assign a public IP address
* ![Screenshot 2025-06-24 191716](https://github.com/user-attachments/assets/727cf282-133e-4b6d-8a84-62bf7241810d)
 
* **In-VM Configuration:** leave ports open to attract brute-force attacks. Disabling Windows Firewall inside the VM to ensure logs are generated and traffic is not blocked.

### 3. Setting Up Log Analytics Workspace
* Go to Log Analytics Workspaces > Create
* ![Screenshot 2025-06-24 205017](https://github.com/user-attachments/assets/b7c8c481-3b43-4d44-b9d3-381c2aba500b)

* Connecting the Honeypot VM to the Log Analytics Workspace.
* This is where all logs are stored for querying



### 4. Integrating with Microsoft Sentinel
* I connected Azure Sentinel to my Log Analytics Workspace.
Sentinel acts as the SIEM, collecting logs and helping visualize threats using built-in dashboards and custom queries.
![Screenshot 2025-06-24 025244](https://github.com/user-attachments/assets/d689103e-7648-4bc7-8968-47154539bf27)

* Enabling Microsoft Defender for Cloud for server protection and log collection.
* I uploaded a GeoIP Watchlist (from MaxMind)
![Screenshot 2025-06-24 043422](https://github.com/user-attachments/assets/c1e1b31d-7da8-4c91-a292-852c2df35ff0)

* Created a custom Sentinel workbook to plot attacker IPs on a world map





### 5. Analyzing Logs with Kusto Query Language (KQL)
* **Basic KQL Queries:** Showcase examples of KQL queries to:
* ![Screenshot 2025-06-25 074912](https://github.com/user-attachments/assets/4903750e-6113-4163-bf85-6e449c493dab)

    * Retrieve all failed RDP attempts.
    * Filter by source IP address, username, or timestamp.
    * Summarize attacks by country or source IP.
* **Querying Enriched Data:** Demonstrate how to query the custom log data, leveraging the added geolocation information.

### 6. Visualizing Attacks with Azure Sentinel Workbooks
* Creating a new Azure Sentinel Workbook.
* Configuring a world map visualization based on the enriched geolocation data from failed RDP attempts.
* ![Screenshot 2025-06-25 074532](https://github.com/user-attachments/assets/33439a4c-68ca-4d09-bfe7-66a6235cfab1)

* Showcase real-time attack data on the map.
* ![Screenshot 2025-06-25 071000](https://github.com/user-attachments/assets/744c2040-7a16-4b78-9d3d-07c9298530c4)


---

## Key Learning Outcomes & Skills Demonstrated
* **Cloud Security Fundamentals:** Understanding of cloud resource deployment (VMs, NSGs), and security best practices (or intentional misconfigurations for lab purposes).
* **Security Operations (SecOps):** Experience with a SIEM platform (Azure Sentinel) for monitoring, detection, and analysis.
* **Log Management & Analysis:** Proficiency in collecting, storing, and analyzing security logs using Azure Log Analytics and KQL.
* **Threat Intelligence:** Utilizing geolocation data to understand attack origins.
* **Scripting:** Basic automation with PowerShell for data processing and ingestion.
* **Data Visualization:** Creating meaningful dashboards for security insights.
* **Incident Response (Basic):** Identifying and understanding common attack patterns (e.g., RDP brute-force).

---

